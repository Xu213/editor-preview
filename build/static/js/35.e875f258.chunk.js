"use strict";(self.webpackChunkeditor_preview=self.webpackChunkeditor_preview||[]).push([[35],{63601:function(e,t,i){i.d(t,{Ak:function(){return n},LK:function(){return a}});var a=function(e){return new Promise((function(){}))},n=function(e,t){return new Promise((function(){}))}},30035:function(e,t,i){i.r(t),i.d(t,{default:function(){return k}});var a=i(29439),n=i(47313),l=i(13880),o=(i(71306),i(35732),i(33248),i(67371),i(18689),i(58049),i(46855)),r=i(1413),d=i(15671),s=i(43144),p=i(60136),c=i(27277),u=JSON.parse('{"type":"schema-slot","label":"\u6a21\u677f","showAbout":true,"api":"","body":{"type":"container","body":[{"type":"container","body":[{"type":"image","id":"u:1c30449789cf","enlargeAble":false,"width":50,"height":50},{"type":"button","label":"","onEvent":{"click":{"actions":[]}},"id":"u:ba75db35d5c1","level":"link","className":"absolute w-full h-full top-0 left-0 className-ba75db35d5c1","css":{"className":{"background:default":"rgba(0, 0, 0, 0)","border:default":{"top-border-width":"none","left-border-width":"none","right-border-width":"none","bottom-border-width":"none"},"height":"100%"}},"block":true},{"type":"tpl","tpl":"\u5185\u5bb9","inline":true,"wrapperComponent":"","id":"u:8a3be4ec5f33","style":{"marginTop":"10px"}}],"style":{"position":"relative","display":"flex","flex":"0 0 150px","flexDirection":"column","flexWrap":"nowrap","justifyContent":"center","alignItems":"center","flexBasis":"25%","overflowX":"hidden","inset":"auto","zIndex":0,"height":"100px","overflowY":"hidden"},"wrapperBody":false,"id":"u:a300034878ec","isFixedHeight":true,"themeConfig":{}},{"type":"container","body":[{"type":"image","id":"u:1c30449789cf","enlargeAble":false,"width":50,"height":50},{"type":"button","label":"","onEvent":{"click":{"actions":[]}},"id":"u:ba75db35d5c1","level":"link","className":"absolute w-full h-full top-0 left-0 className-ba75db35d5c1","css":{"className":{"background:default":"rgba(0, 0, 0, 0)","border:default":{"top-border-width":"none","left-border-width":"none","right-border-width":"none","bottom-border-width":"none"},"height":"100%"}},"block":true},{"type":"tpl","tpl":"\u5185\u5bb9","inline":true,"wrapperComponent":"","id":"u:8a3be4ec5f33","style":{"marginTop":"10px"}}],"style":{"position":"relative","display":"flex","flex":"0 0 150px","flexDirection":"column","flexWrap":"nowrap","justifyContent":"center","alignItems":"center","flexBasis":"25%","overflowX":"hidden","inset":"auto","zIndex":0,"height":"100px","overflowY":"hidden"},"wrapperBody":false,"id":"u:a300034878ec","isFixedHeight":true,"themeConfig":{}},{"type":"container","body":[{"type":"image","id":"u:1c30449789cf","enlargeAble":false,"width":50,"height":50},{"type":"button","label":"","onEvent":{"click":{"actions":[]}},"id":"u:ba75db35d5c1","level":"link","className":"absolute w-full h-full top-0 left-0 className-ba75db35d5c1","css":{"className":{"background:default":"rgba(0, 0, 0, 0)","border:default":{"top-border-width":"none","left-border-width":"none","right-border-width":"none","bottom-border-width":"none"},"height":"100%"}},"block":true},{"type":"tpl","tpl":"\u5185\u5bb9","inline":true,"wrapperComponent":"","id":"u:8a3be4ec5f33","style":{"marginTop":"10px"}}],"style":{"position":"relative","display":"flex","flex":"0 0 150px","flexDirection":"column","flexWrap":"nowrap","justifyContent":"center","alignItems":"center","flexBasis":"25%","overflowX":"hidden","inset":"auto","zIndex":0,"height":"100px","overflowY":"hidden"},"wrapperBody":false,"id":"u:a300034878ec","isFixedHeight":true,"themeConfig":{}},{"type":"container","body":[{"type":"image","id":"u:1c30449789cf","enlargeAble":false,"width":50,"height":50},{"type":"button","label":"","onEvent":{"click":{"actions":[]}},"id":"u:ba75db35d5c1","level":"link","className":"absolute w-full h-full top-0 left-0 className-ba75db35d5c1","css":{"className":{"background:default":"rgba(0, 0, 0, 0)","border:default":{"top-border-width":"none","left-border-width":"none","right-border-width":"none","bottom-border-width":"none"},"height":"100%"}},"block":true},{"type":"tpl","tpl":"\u5185\u5bb9","inline":true,"wrapperComponent":"","id":"u:8a3be4ec5f33","style":{"marginTop":"10px"}}],"style":{"position":"relative","display":"flex","flex":"0 0 150px","flexDirection":"column","flexWrap":"nowrap","justifyContent":"center","alignItems":"center","flexBasis":"25%","overflowX":"hidden","inset":"auto","zIndex":0,"height":"100px","overflowY":"hidden"},"wrapperBody":false,"id":"u:a300034878ec","isFixedHeight":true,"themeConfig":{}}],"style":{"position":"static","display":"flex","flexDirection":"row","flexWrap":"nowrap","justifyContent":"space-evenly","alignItems":"stretch","paddingTop":"10px","paddingRight":"10px","paddingBottom":"10px","paddingLeft":"10px"},"wrapperBody":false,"id":"u:359313fd93fb","isFixedHeight":false,"isFixedWidth":false},"id":"u:c1e88d7df587"}'),m=function(e){(0,p.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;(0,d.Z)(this,i);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).rendererName="schema-slot",e.searchKeywords="\u624b\u673a\u5bfc\u56fe",e.$schema="/schemas/UnkownSchema.json",e.name="\u624b\u673a\u5bfc\u56fe",e.description="\u56db \u56fe\u6807\u6587\u5b57\u5bfc\u822a",e.tags=["\u624b\u673a\u5bfc\u56fe"],e.icon="far fa-file-word",e.scaffold=u,e.previewSchema=(0,r.Z)({},u),e.panelTitle="\u624b\u673a\u5bfc\u56fe",e}return(0,s.Z)(i,[{key:"panelBodyCreator",value:function(e){return[(0,l.getSchemaTpl)("tabs",[{title:"\u5e38\u89c4",body:[(0,l.getSchemaTpl)("switch",{name:"showAbout",label:"\u9690\u85cf\u6807\u9898"})]},{title:"\u63a5\u53e3",body:[(0,l.getSchemaTpl)("api",{name:"api",label:"\u63a5\u53e3\u5730\u5740",description:" \u63a5\u53e3\u5b58\u5728\u8de8\u57df\u95ee\u9898\uff0c\u9700\u8981\u540e\u7aef\u4ee3\u7406\uff0c\u8bf7\u5728\u6b64\u586b\u5199\u63a5\u53e3\u5730\u5740"})]},{title:"\u5916\u89c2",body:[(0,l.getSchemaTpl)("className")]}])]}}]),i}(l.BasePlugin),g=i(51918),b=i(46417),f=function(e){(0,p.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;(0,d.Z)(this,i);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={data:{},loading:!1},e}return(0,s.Z)(i,[{key:"componentDidMount",value:function(){this.props.initFetch&&this.getCustomApi()}},{key:"getCustomApi",value:function(e){var t=this,i=this.props,a=i.env,n=i.api,l=i.sentence,o=(0,g.normalizeApi)(n);this.setState({loading:!0}),a.fetcher((0,r.Z)((0,r.Z)({},o),{},{data:{c:e||l}})).then((function(e){e.data;t.setState({data:data,loading:!1})})).catch((function(e){t.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.label,i=e.showAbout,a=e.body,n=e.render;return(0,b.jsxs)(b.Fragment,{children:[i&&(0,b.jsxs)("p",{children:["\u81ea\u5b9a\u4e49\uff1a",t]}),a?(0,b.jsx)("div",{className:"container",children:n("body",a,{})}):null]})}}]),i}(n.Component),h=function(){(0,o.Renderer)({type:"schema-slot",autoVar:!0})(f),(0,l.registerEditorPlugin)(m)},y=i(287),v=JSON.parse('{"type":"page","title":"","body":[],"regions":["body","header"]}'),w=i(63601),x=i(59091),S=y;h();var k=function(){var e=(0,x.Q)();null!==e&&void 0!==e&&e.id&&(0,w.LK)(e.id).then((function(e){S=e,console.log("getJson",e),localStorage.setItem("editting_schema",JSON.stringify(S))}));var t=n.useState((null===e||void 0===e?void 0:e.id)||"sdfsdfsdfsfdsdf"),i=(0,a.Z)(t,2),o=i[0],r=(i[1],n.useState(!!localStorage.getItem("editting_preview"))),d=(0,a.Z)(r,2),s=d[0],p=d[1],c=n.useState(!![null,"true",!0].includes(localStorage.getItem("editting_preview_mobile"))),u=(0,a.Z)(c,2),m=u[0],g=u[1],f=n.useState(localStorage.getItem("editting_schema")?JSON.parse(localStorage.getItem("editting_schema")||""):S),h=(0,a.Z)(f,2),y=h[0],k=h[1],N=function(e){localStorage.setItem("editting_preview",e?"true":""),p(!!e)},C=function(e){localStorage.setItem("editting_preview_mobile",e?"true":""),g(!!e)};return(0,b.jsxs)("div",{className:"Editor-Demo",children:[(0,b.jsxs)("div",{className:"Editor-header",children:[(0,b.jsxs)("div",{className:"Editor-title",children:["\u9875\u9762ID:",o]}),(0,b.jsx)("div",{className:"Editor-view-mode-group-container",children:(0,b.jsxs)("div",{className:"Editor-view-mode-group",children:[(0,b.jsx)("div",{className:"Editor-view-mode-btn ".concat(m?"":"is-active"),onClick:function(){C(!1)},children:"PC"}),(0,b.jsx)("div",{className:"Editor-view-mode-btn ".concat(m?"is-active":""),onClick:function(){C(!0)},children:"\u79fb\u52a8"})]})}),(0,b.jsxs)("div",{className:"Editor-header-actions",children:[(0,b.jsx)(l.ShortcutKey,{}),(0,b.jsx)("div",{className:"header-action-btn preview-btn  margin-left-space",onClick:function(){localStorage.removeItem("editting_schema"),k(v)},children:"\u6e05\u7a7a"}),(0,b.jsx)("div",{className:"header-action-btn  margin-left-space",onClick:function(){N(!s)},children:s?"\u7f16\u8f91":"\u9884\u89c8"})]})]}),(0,b.jsx)("div",{className:"Editor-inner",children:(0,b.jsx)(l.Editor,{preview:s,isMobile:m,value:y,onChange:function(e){localStorage.setItem("editting_schema",JSON.stringify(e)),k(e)},onPreview:N,onSave:function(){var e=y;localStorage.setItem("editting_schema",JSON.stringify(e)),(0,w.Ak)(o,e).then((function(e){S=e,console.log("getJson",e),localStorage.setItem("editting_schema",JSON.stringify(S))}))},className:"is-fixed",theme:"cxd",showCustomRenderersPanel:!0,$schemaUrl:"".concat(location.protocol,"//").concat(location.host,"/schema.json")})})]})}},33248:function(e,t,i){var a=i(34420)(e.id,{publicPath:"../../",locals:!0});e.hot.dispose(a)},67371:function(e,t,i){var a=i(34420)(e.id,{publicPath:"../../",locals:!0});e.hot.dispose(a)},18689:function(e,t,i){var a=i(34420)(e.id,{publicPath:"../../",locals:!0});e.hot.dispose(a)},287:function(e){e.exports=JSON.parse('{"type":"page","title":"\u589e\u5220\u6539\u67e5\u793a\u4f8b","remark":"bla bla bla","toolbar":[{"type":"button","actionType":"dialog","label":"\u65b0\u589e","icon":"fa fa-plus pull-left","primary":true,"dialog":{"title":"\u65b0\u589e","body":{"type":"form","name":"sample-edit-form","api":"post:/amis/api/sample","body":[{"type":"input-text","name":"engine","label":"Engine","required":true},{"type":"divider"},{"type":"input-text","name":"browser","label":"Browser","required":true},{"type":"divider"},{"type":"input-text","name":"platform","label":"Platform(s)","required":true},{"type":"divider"},{"type":"input-text","name":"version","label":"Engine version"},{"type":"divider"},{"type":"input-text","name":"grade","label":"CSS grade"}]}}}],"body":{"type":"crud","draggable":true,"api":"/amis/api/sample?waitSeconds=1","perPage":15,"keepItemSelectionOnPageChange":true,"maxKeepItemSelectionLength":11,"labelTpl":"${id} ${engine}","orderBy":"id","orderDir":"asc","filter":{"title":"\u6761\u4ef6\u641c\u7d22","submitText":"","body":[{"type":"input-text","name":"keywords","placeholder":"\u901a\u8fc7\u5173\u952e\u5b57\u641c\u7d22","addOn":{"label":"\u641c\u7d22","type":"submit"}},{"type":"plain","text":"\u8fd9\u91cc\u7684\u8868\u5355\u9879\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a"}]},"bulkActions":[{"label":"\u6279\u91cf\u5220\u9664","actionType":"ajax","api":"delete:/amis/api/sample/${ids|raw}","confirmText":"\u786e\u5b9a\u8981\u6279\u91cf\u5220\u9664?"},{"label":"\u6279\u91cf\u4fee\u6539","actionType":"dialog","dialog":{"title":"\u6279\u91cf\u7f16\u8f91","name":"sample-bulk-edit","body":{"type":"form","api":"/amis/api/sample/bulkUpdate2","body":[{"type":"hidden","name":"ids"},{"type":"input-text","name":"engine","label":"Engine"}]}}}],"quickSaveApi":"/amis/api/sample/bulkUpdate","quickSaveItemApi":"/amis/api/sample/$id","filterTogglable":true,"headerToolbar":["filter-toggler","bulkActions",{"type":"tpl","tpl":"\u5b9a\u5236\u5185\u5bb9\u793a\u4f8b\uff1a\u5f53\u524d\u6709 ${count} \u6761\u6570\u636e\u3002","className":"v-middle"},{"type":"link","href":"https://www.baidu.com","body":"\u767e\u5ea6\u4e00\u4e0b","htmlTarget":"_parent","className":"v-middle"},{"type":"columns-toggler","align":"right"},{"type":"drag-toggler","align":"right"},{"type":"pagination","align":"right"}],"footerToolbar":["statistics","switch-per-page","pagination"],"columns":[{"name":"id","label":"ID","width":20,"sortable":true,"type":"text","toggled":true,"remark":"Bla bla Bla"},{"name":"engine","label":"Rendering engine","sortable":true,"searchable":true,"popOver":{"body":"Popover \u5185\u5bb9\uff1a${platform}","trigger":"hover"},"popOverEnableOn":"this.id === 1","type":"text","toggled":true},{"name":"browser","label":"Browser","sortable":true,"type":"text","toggled":false},{"name":"platform","label":"Platform(s)","popOver":{"body":"Popover \u5185\u5bb9\uff1a${platform}"},"sortable":true,"type":"text","toggled":true},{"name":"version","label":"Engine version","quickEdit":true,"type":"text","toggled":true,"filterable":{"options":[{"label":"4","value":"4"},{"label":"5","value":"5"},{"label":"6","value":"6"}]},"classNameExpr":"<%= data.version < 5 ? \'bg-danger\' : \'\' %>"},{"type":"text","name":"grade","label":"CSS grade","quickEdit":{"saveImmediately":true,"mode":"inline","type":"select","options":["A","B","C","D","X"]}},{"type":"operation","label":"\u64cd\u4f5c","width":100,"buttons":[{"type":"button","icon":"fa fa-eye","actionType":"dialog","tooltip":"\u67e5\u770b","dialog":{"title":"\u67e5\u770b","body":{"type":"form","body":[{"type":"static","name":"engine","label":"Engine"},{"type":"divider"},{"type":"static","name":"browser","label":"Browser"},{"type":"divider"},{"type":"static","name":"platform","label":"Platform(s)"},{"type":"divider"},{"type":"static","name":"version","label":"Engine version"},{"type":"divider"},{"type":"static","name":"grade","label":"CSS grade"},{"type":"divider"},{"type":"html","html":"<p>\u6dfb\u52a0\u5176\u4ed6 <span>Html \u7247\u6bb5</span> \u9700\u8981\u652f\u6301\u53d8\u91cf\u66ff\u6362\uff08todo\uff09.</p>"}]}}},{"type":"button","icon":"fa fa-pencil","tooltip":"\u7f16\u8f91","actionType":"drawer","drawer":{"position":"left","size":"lg","title":"\u7f16\u8f91","body":{"type":"form","name":"sample-edit-form","api":"/amis/api/sample/$id","body":[{"type":"input-text","name":"engine","label":"Engine","required":true},{"type":"divider"},{"type":"input-text","name":"browser","label":"Browser","required":true},{"type":"divider"},{"type":"input-text","name":"platform","label":"Platform(s)","required":true},{"type":"divider"},{"type":"input-text","name":"version","label":"Engine version"},{"type":"divider"},{"type":"select","name":"grade","label":"CSS grade","options":["A","B","C","D","X"]}]}}},{"type":"button","icon":"fa fa-times text-danger","actionType":"ajax","tooltip":"\u5220\u9664","confirmText":"\u60a8\u786e\u8ba4\u8981\u5220\u9664?","api":"delete:/amis/api/sample/$id"}],"toggled":true}]}}')}}]);